<div class="min-h-screen bg-[#F5F5F7] text-[#1D1D1F] font-sans flex flex-col">
    
    <header class="sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-[#D2D2D7] h-16 flex-none">
        <div class="w-full h-full flex items-center justify-between px-6 max-w-[1600px] mx-auto">
            
            <div class="flex items-center gap-6">
                <div class="flex items-center gap-2">
                    <div class="size-8 rounded-lg bg-[#0066CC] text-white flex items-center justify-center font-bold text-xl shadow-sm">
                        P
                    </div>
                    <span class="font-bold text-[#1D1D1F] text-lg hidden sm:block tracking-tight">Partalog</span>
                </div>

                <div class="h-5 w-px bg-[#D2D2D7] mx-2 hidden sm:block"></div>

                <a routerLink="/public-view" class="flex items-center gap-1 text-[#0066CC] hover:text-[#004499] transition-colors text-sm font-medium cursor-pointer">
                    <span class="material-symbols-outlined text-[18px]">chevron_left</span>
                    Geri Dön
                </a>
            </div>

            <div class="flex-1 max-w-lg mx-6">
                <div class="relative group">
                    <span class="absolute left-3 top-1/2 -translate-y-1/2 text-[#86868B] material-symbols-outlined text-[20px]">
                        search
                    </span>
                    <input type="text" 
                           [(ngModel)]="searchQuery" 
                           (input)="onSearch()"
                           placeholder="Parça adı veya numarası ara..." 
                           class="w-full h-9 pl-10 pr-4 rounded-lg bg-[#E5E5EA] border-none text-sm text-[#1D1D1F] placeholder-[#86868B] focus:bg-white focus:ring-2 focus:ring-[#0066CC]/50 transition-all outline-none">
                </div>
            </div>

            <div class="flex items-center gap-3">
                <button class="text-xs font-medium text-[#1D1D1F] bg-[#E5E5EA] hover:bg-[#D2D2D7] px-3 py-1.5 rounded-md transition-colors">
                    TR
                </button>
            </div>
        </div>
    </header>

    <div class="flex flex-1 overflow-hidden max-w-[1600px] mx-auto w-full">
        
        <aside class="w-72 bg-white border-r border-[#D2D2D7] hidden lg:flex flex-col overflow-y-auto">
            <div class="p-5 border-b border-[#F5F5F7]">
                <h2 class="font-semibold text-[#1D1D1F] text-lg leading-tight">{{ catalog?.name || 'Katalog Yükleniyor...' }}</h2>
                <p class="text-xs text-[#86868B] mt-2 font-medium">İÇİNDEKİLER</p>
            </div>
            
            <nav class="flex-1 py-2 px-2 space-y-0.5">
                @for (group of filteredGroups; track group.pageIndex) {
                    <a [routerLink]="['/view', catalog?.id, 'viewer', group.pageIndex]"
                       routerLinkActive="bg-[#0066CC] text-white shadow-sm"
                       class="block px-3 py-2.5 text-[13px] font-medium rounded-lg text-[#1D1D1F] hover:bg-[#F5F5F7] transition-all truncate cursor-pointer group">
                       
                       <div class="flex items-center justify-between">
                           <span class="truncate">{{ group.title }}</span>
                           <span class="text-[10px] opacity-60 group-hover:opacity-100 bg-black/5 px-1.5 py-0.5 rounded-md router-link-active:bg-white/20">
                               {{ group.pageIndex }}
                           </span>
                       </div>
                    </a>
                }
            </nav>
        </aside>

        <main class="flex-1 overflow-y-auto bg-[#F5F5F7]">
            
            <div class="relative w-full h-[280px] md:h-[350px] overflow-hidden bg-black group mb-6">
                
                <video autoplay muted loop playsinline class="absolute inset-0 w-full h-full object-cover opacity-60 scale-105 group-hover:scale-100 transition-transform duration-[2s]">
                    <source src="https://videos.pexels.com/video-files/8555651/8555651-uhd_2560_1440_25fps.mp4" type="video/mp4">
                </video>
                
                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent flex flex-col justify-end p-8 md:p-12">
                    <div class="max-w-3xl animate-fade-in-up">
                        <span class="inline-block px-3 py-1 bg-[#0066CC] text-white text-[10px] font-bold uppercase tracking-wider rounded-md mb-3 shadow-lg">
                            Yeni Teknoloji
                        </span>
                        <h1 class="text-3xl md:text-4xl font-bold text-white mb-2 tracking-tight drop-shadow-md">
                            {{ catalog?.name || 'Yedek Parça Kataloğu' }}
                        </h1>
                        <p class="text-gray-300 text-sm md:text-base max-w-xl drop-shadow-sm">
                            En güncel teknik çizimler ve parça listeleriyle donatılmış interaktif kataloğumuzu keşfedin.
                        </p>
                    </div>
                </div>
            </div>

            <div class="px-6 pb-12">
                
                <div class="mb-6 flex items-center gap-2 text-xs font-medium text-[#86868B]">
                    <span class="hover:text-[#0066CC] cursor-pointer" routerLink="/public-view">Ana Sayfa</span>
                    <span class="material-symbols-outlined text-[10px]">chevron_right</span>
                    <span class="text-[#1D1D1F]">{{ catalog?.name }}</span>
                </div>

                @if (isLoading) {
                    <div class="flex flex-col items-center justify-center py-20 gap-4">
                        <span class="material-symbols-outlined text-4xl text-[#0066CC] animate-spin">progress_activity</span>
                        <span class="text-[#86868B] text-sm font-medium">Teknik resimler yükleniyor...</span>
                    </div>
                }
                @else {
                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6">
                        
                        @for (group of filteredGroups; track group.pageIndex) {
                            <a [routerLink]="['/view', catalog?.id, 'viewer', group.pageIndex]" 
                               class="group bg-white rounded-xl border border-[#D2D2D7] overflow-hidden hover:border-[#0066CC] hover:shadow-lg transition-all duration-300 cursor-pointer flex flex-col h-full transform hover:-translate-y-1">
                                
                                <div class="aspect-[4/3] bg-white p-6 flex items-center justify-center relative border-b border-[#F5F5F7]">
                                    <img [src]="group.imageUrl" 
                                         class="max-w-full max-h-full object-contain group-hover:scale-105 transition-transform duration-500 mix-blend-multiply"
                                         alt="Teknik Resim"
                                         loading="lazy">
                                    
                                    <div class="absolute bottom-3 right-3 bg-black/70 backdrop-blur-md text-white text-[10px] font-bold px-2 py-1 rounded-md opacity-0 group-hover:opacity-100 transition-opacity transform translate-y-2 group-hover:translate-y-0">
                                        İncele
                                    </div>
                                </div>

                                <div class="p-4 flex flex-col flex-1 justify-between">
                                    <div>
                                        <h3 class="text-[#1D1D1F] text-[13px] font-bold uppercase leading-snug line-clamp-2 mb-1 group-hover:text-[#0066CC] transition-colors">
                                            {{ group.title }}
                                        </h3>
                                        <p class="text-[11px] text-[#86868B]">Sayfa No: {{ group.pageIndex }}</p>
                                    </div>
                                    
                                    <div class="mt-3 pt-3 border-t border-[#F5F5F7] flex items-center justify-between">
                                        <span class="inline-flex items-center gap-1 text-[11px] font-medium text-[#64748B] bg-[#F1F5F9] px-2 py-1 rounded-md">
                                            <span class="material-symbols-outlined text-[14px]">settings_suggest</span>
                                            {{ group.partCount || 0 }} Parça
                                        </span>
                                        
                                        <span class="material-symbols-outlined text-[#D2D2D7] group-hover:text-[#0066CC] group-hover:translate-x-1 transition-all text-[20px]">
                                            arrow_forward
                                        </span>
                                    </div>
                                </div>
                            </a>
                        }

                        @if (filteredGroups.length === 0) {
                            <div class="col-span-full py-20 text-center">
                                <div class="size-16 bg-[#F5F5F7] rounded-full flex items-center justify-center mx-auto mb-4">
                                    <span class="material-symbols-outlined text-3xl text-[#86868B]">search_off</span>
                                </div>
                                <h3 class="text-[#1D1D1F] font-semibold">Sonuç bulunamadı</h3>
                                <p class="text-[#86868B] text-sm mt-1">Arama kriterlerinizi değiştirip tekrar deneyin.</p>
                            </div>
                        }

                    </div>
                }
            </div>
        </main>
    </div>
</div>